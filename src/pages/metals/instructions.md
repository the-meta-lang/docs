---
layout: ../../layouts/Layout.astro
title: Instructions
description: A comprehensive list of all supported instructions in the META Language Specification.
section: METALS
---

This is a list of the instructions in the instruction set of the META Intermediate Language bytecode.

The [META VM](../vm/index.md) and consequently, the machine code generated by the `.masm` compiler operate on a reduced instruction set, made possible by a pre-execution type checker and inherent immutability of objects.

There are `4` local registers that can be assigned values to, each of which is `64 bit` in size.

Like [Rust](https://www.rust-lang.org/), META implements a borrow checker, that handles pointer instructions and data referencing at compile-time.

- The types listed here are provided by the META Type System.
- Opcode abbreviated from operation code is the portion of a machine language instruction that specifies the operation to be performed.

## Runtime instructions

| [Opcode](/wiki/Opcode "Opcode") | Instruction | Description | Type of instruction |
| --- | --- | --- | --- |
| 0x00     | `nop`          | Do nothing (**N**o **Op**eration)          | Base instruction |
| 0x0A     | `stloc1`          | Pop the last value from the stack into local register 1          | Base instruction |
| 0x0B     | `stloc2`          | Pop the last value from the stack into local register 2          | Base instruction |
| 0x0C     | `stloc3`          | Pop the last value from the stack into local register 3          | Base instruction |
| 0x0D     | `stloc4`          | Pop the last value from the stack into local register 4          | Base instruction |
| 0x03 | `ldc <any (target)>` | Push target onto the stack as previously defined type. | Base instruction |
| 0x2A | `ret` | **Ret**urn from method, possibly with a value. | Base instruction |
| 0x2B | `br <int32 (target)>` | **Br**anch to target | Base instruction |
| 0x3A | `brtrue <int32 (target)>` | **Br**anch to target if value is non-zero (**true**). | Base instruction |
| 0x39 | `brfalse <int32 (target)>` | **Br**anch to target if value is zero (**false**). | Base instruction |
| 0x3B | `beq <int32 (target)>` | **B**ranch to target if **eq**ual. | Base instruction |
| 0x3C | `bge <int32 (target)>` | **B**ranch to target if **g**reater than or **e**qual to. | Base instruction |
| 0x3D | `bgt <int32 (target)>` | **B**ranch to target if **g**reater **t**han. | Base instruction |
| 0x3E | `ble <int32 (target)>` | **B**ranch to target if **l**ess than or **e**qual to. | Base instruction |
| 0x3F | `blt <int32 (target)>` | **B**ranch to target if **l**ess **t**han. | Base instruction |
| 0x5A | `mul` | Multiply values. | Base instruction |
| 0x5B | `div` | Divide two values to return a quotient or floating-point result. | Base instruction |
| 0x5C | `divun` | Divide two values, unsigned, returning a quotient. | Base instruction |
| 0x5D | `rem` | **Rem**ainder when dividing one value by another. | Base instruction |
| 0x5E | `remun` | **Rem**ainder when dividing one **un**signed value by another. | Base instruction |
| 0x5F | `and` | Bitwise **AND** of two integral values, returns an integral value. | Base instruction |
| 0x7A | `throw` | **Throw** an exception. | Object model instruction |
| 0x7B | `ld <value>` | Push value onto the stack. | Base instruction |
| 0x7C | `lda <value>` | Push the address of value onto the stack. | Base instruction |
| 0x8D | `newarr <etype>` | Create a new array with elements of type etype. | Object model instruction |
| 0x8E | `ldlen` | Push the length (of type native unsigned int) of array on the stack. | Object model instruction |
| 0x8F | `ldelema <class>` | Load the address of element at index onto the top of the stack. | Object model instruction |
| 0x9B | `stelem <int32 (i)> <any (value)>` | **St**ore the given value in the array at index **i**. | Object model instruction |
| 0x11 | `ldloc <uint8 (indx)>` | Load local variable of index indx onto stack. | Base instruction |
| 0x12 | `ldloca <uint8 (indx)>` | Load address of local variable with index indx. | Base instruction |
| 0x13 | `stloc <uint8 (indx)>` | Pop a value from stack into local variable indx. | Base instruction |
| 0x14 | `ldnull` | Push a null reference on the stack. | Base instruction |
| 0x25 | `dup` | Duplicate the value on the top of the stack. | Base instruction |
| 0x26 | `pop` | **Pop** value from the stack. | Base instruction |
| 0x27 | `jmp <method>` | Exit current method and jump to the specified method. | Base instruction |
| 0x28 | `call <method>` | **Call** method described by method. | Base instruction |
| 0x38 | `br <int32 (target)>` | **Br**anch to target. | Base instruction |
| 0x45 | `switch <uint32, int32, int32 (t1..tN)>` | Jump to one of n values. | Base instruction |
| 0x58 | `add` | **Add** two values, returning a new value. | Base instruction |
| 0x59 | `sub` | **Sub**tract value2 from value1, returning a new value. | Base instruction |
| 0x60 | `or` | Bitwise **OR** of two integer values, returns an integer. | Base instruction |
| 0x61 | `xor` | Bitwise **XOR** of integer values, returns an integer. | Base instruction |
| 0x62 | `shl` | **Sh**ift an integer **l**eft (shifting in zeros), return an integer. | Base instruction |
| 0x63 | `shr` | **Sh**ift an integer **r**ight (shift in sign), return an integer. | Base instruction |
| 0x65 | `neg` | Negate value. | Base instruction |
| 0x66 | `not` | Bitwise complement. | Base instruction |
| 0x75 | `isinst <class>` | Test if obj is an instance of class, returning null or an instance of that class or interface. | Object model instruction |
| 0xFE 0x1C | `sizeof <typeTok>` | Push the size, in bytes, of a type as an unsigned int32. | Object model instruction |


## Debugger instructions

| [Opcode](/wiki/Opcode "Opcode") | Instruction | Description | Type of instruction |
| --- | --- | --- | --- |
| 0x01	 | `%loc <uint8 (line)> <uint8 (col)>` | Inform a debugger about the current line and column number | Debugger instruction |


## Type-checker instructions
| [Opcode](/wiki/Opcode "Opcode") | Instruction | Description | Type of instruction |
| --- | --- | --- | --- |
| 0x02	 | `%cvt <uint8 (type)>` | Inform the compiler about the type of the last item on the stack. | Preprocessor instruction |